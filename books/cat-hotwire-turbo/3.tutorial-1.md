---
title: "ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1 Railsã§ç®¡ç†ç”»é¢ã‚’ä½œã‚‹"
---

# ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«å…¨ä½“ã®èª¬æ˜
ğŸ± ä»Šå›ã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã¨ã—ã¦SPAé¢¨ã®ç®¡ç†ç”»é¢ã‚’ä½œã£ã¦ã„ãã‚ˆã€‚Rails Adminã‚„Active Adminã®ã‚ˆã†ãªç®¡ç†ç”»é¢ã‚’æƒ³å®šã—ã¦ã„ã‚‹ã‚ˆã€‚

ğŸ± å…·ä½“çš„ã«ã¯CRUDï¼ˆä¸€è¦§ãƒ»ç·¨é›†ãƒ»ç™»éŒ²ãƒ»å‰Šé™¤ï¼‰ãŒã§ãã¦ã€ãã“ã«ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãƒ»æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆãªã©ã®ãƒ—ãƒ©ã‚¹Î±ãªæ©Ÿèƒ½ãŒã‚ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã ã‚ˆã€‚ã“ã‚Œã‚’SPAé¢¨ã«ã—ãŸã‚‚ã®ã‚’ä½œã£ã¦ã„ãã‚ˆã€‚

ğŸ± ãƒ™ãƒ¼ã‚¹ã¯ãŸã ã®CRUDãªã®ã§ç®¡ç†å¯¾è±¡ã¯ãªã‚“ã§ã‚‚ã„ã„ã‚“ã ã‘ã©ã€ã­ã“ãŒå¥½ããªã®ã§catsãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç®¡ç†å¯¾è±¡ã«ã™ã‚‹ã‚ˆã€‚å¾Œã¯ã»ã‹ã«ã‚‚ã„ãã¤ã‹å‹•ç‰©ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç”¨æ„ã—ã¦ã€AMSï¼ˆAnimal Management System: å‹•ç‰©ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼‰ã¨ã„ã†ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ä½œã£ã¦ã„ãã€‚

ğŸ± ã¾ãšãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã§ã¯ã€Hotwireã‚’ä½¿ã‚ãšã«ã€ç´ ã®Railsã§ç®¡ç†ç”»é¢ã‚’é–‹ç™ºã™ã‚‹ã‚ˆã€‚

![](/images/Apr-10-2022-16-25-58.gif)
*ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1*

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã®ãƒ‡ãƒ¢ã¯ã“ã¡ã‚‰ã‹ã‚‰è§¦ã‚Œã‚‹ã‚ˆã€‚
https://cat-hotwire-1.herokuapp.com/cats

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã§ã¯Turboã‚’ä½¿ã£ã¦ã€JavaScriptã‚’æ›¸ã‹ãšã«ç®¡ç†ç”»é¢ã‚’SPAé¢¨ã«ã—ã¦ã„ãã‚ˆã€‚

![](/images/Apr-10-2022-16-25-50.gif)
*ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2*

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã®ãƒ‡ãƒ¢ã¯ã“ã¡ã‚‰ã‹ã‚‰è§¦ã‚Œã‚‹ã‚ˆã€‚
https://cat-hotwire-2.herokuapp.com/cats

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3ã§ã¯Stimulusã‚’ä½¿ã£ã¦ã€ç®¡ç†ç”»é¢ã‚’ã‚‚ã£ã¨SPAé¢¨ã«ã—ã¦ã„ãã‚ˆã€‚

![](/images/Apr-10-2022-16-25-44.gif)
*ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3*

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«3ã®ãƒ‡ãƒ¢ã¯ã“ã¡ã‚‰ã‹ã‚‰è§¦ã‚Œã‚‹ã‚ˆã€‚
https://cat-hotwire-3.herokuapp.com/cats

:::message
ğŸ± ãƒ‡ãƒ¢ã‚¢ãƒ—ãƒªã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã«ã¯Herokuã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã€‚Herokuã¯æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ãŒãªã„ãŸã‚USãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ©ç”¨ã—ã¦ã„ã¦ã€æ—¥æœ¬ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã ã¨200msç¨‹åº¦ã®ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ãŒç™ºç”Ÿã™ã‚‹ã€‚é€šå¸¸ã®ç”»é¢é·ç§»ã ã¨è¨±å®¹ç¯„å›²ã«ãªã‚‹ã“ã¨ã‚‚å¤šã„ã‚“ã ã‘ã©ã€Hotwireã‚’ä½¿ã£ã¦ç”»é¢ã®ä¸€éƒ¨ã‚’æ›´æ–°ã™ã‚‹å ´åˆã«ã¯ã¡ã‚‡ã£ã¨è¨±å®¹ã§ããªã„é…ã•ã ã¨æ„Ÿã˜ã‚‹ã‚ˆã€‚

ğŸ± ã“ã¡ã‚‰ã¯ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã®ã‚¢ãƒ—ãƒªã‚’Herokuã§å‹•ã‹ã—ãŸã‚‚ã®ã¨ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã—ãŸã‚‚ã®ã¨ã®æ¯”è¼ƒã ã‚ˆã€‚

![](/images/Apr-11-2022-10-38-53.gif)
*Herokuï¼ˆUSãƒªãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰ã®å ´åˆ*

![](/images/Apr-11-2022-10-39-00.gif)
*ãƒ­ãƒ¼ã‚«ãƒ«ã®å ´åˆ*

ğŸ± [ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã®ãƒ‡ãƒ¢](https://cat-hotwire-2.herokuapp.com/cats)ã‚’è§¦ã£ã¦ã‚‚ã‚‰ã†ã¨ã‚ã‹ã‚‹ã‘ã©ã€è¨±å®¹ã§ããªã„é…ã•ã ã‚ˆã€‚

ğŸ± Hotwireã¯å…¨ã¦ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§è¡Œã†è¨­è¨ˆã®ãŸã‚ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ã£ã¦ã‹ã‚‰ç”»é¢æ›´æ–°ã‚’è¡Œã†ã“ã¨ã«ãªã‚‹ã€‚ãã®ãŸã‚ã‚µãƒ¼ãƒãƒ¼ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ãŸãšã«ç”»é¢ã‚’æ›´æ–°ã§ãã‚‹Reactãªã©ã¨ã¯é•ã„ã€ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®å½±éŸ¿ã‚’ã‚‚ã‚ã«å—ã‘ã‚‹ã€‚æ±äº¬ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ãˆã°ãƒ­ãƒ¼ã‚«ãƒ«ã¨éœè‰²ãªã„é€Ÿåº¦ãŒå‡ºã‚‹ã®ã§å•é¡Œç„¡ã„ã®ã ã‘ã©ã€Hotwireã‚’ä½¿ã†éš›ã«ã¯ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã«ã¯æ³¨æ„ãŒå¿…è¦ã ã‚ˆã€‚
:::
# ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã®èª¬æ˜
ğŸ± ã¾ãšãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã§ã¯ç´ ã®Railsã§ç®¡ç†ç”»é¢ã‚’ä½œã£ã¦ã„ãã‚ˆã€‚

ğŸ± Hotwireã®ç´ æ™´ã‚‰ã—ã„ç‚¹ã®1ã¤ã¨ã—ã¦ã€æ—¢å­˜ã®Railsã‚¢ãƒ—ãƒªã«å¯¾ã—ã¦å¾Œä»˜ã‘ã§æ®µéšçš„ã«SPAé¢¨ã®æŒ™å‹•ã‚’è¿½åŠ ã§ãã‚‹ç‚¹ãŒã‚ã‚‹ã‚ˆã€‚æ—¢å­˜ã®Railsã‚¢ãƒ—ãƒªã®ã‚³ãƒ¼ãƒ‰ã‚’å°‘ã—ä¿®æ­£ã™ã‚‹ã ã‘ã§ã€SPAã®ãƒ¡ãƒªãƒƒãƒˆã‚’äº«å—ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã‚“ã ã€‚åˆã‚ã‹ã‚‰Hotwireã‚’ä½¿ã£ã¦é–‹ç™ºã—ã¦ã‚‚ã„ã„ã‚“ã ã‘ã©ã€ä»Šå›ã¯ã¾ãšã¯æ…£ã‚Œè¦ªã—ã‚“ã ç´ ã®Railsã§ç®¡ç†ç”»é¢ã‚’ä½œã£ã¦ã€ãã®å¾Œã§Hotwireã‚’ä½¿ã£ã¦SPAé¢¨ã«ã—ã¦ã„ãã‚ˆã€‚

ğŸ± ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã¯Hotwireã¯ä½¿ã‚ãªã„ã®ã§ã€ä¸è¦ã ã¨æ€ã£ãŸã‚‰æ¬¡ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã¾ã§èª­ã¿é£›ã°ã—ã¡ã‚ƒã£ã¦ã‚‚OKã ã‚ˆã€‚ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1çµ‚äº†æ™‚ç‚¹ã®ã‚³ãƒ¼ãƒ‰ã¯ https://github.com/shita1112/cat-hotwire-demo ã«ã‚ã‚‹ã‹ã‚‰ãã“ã‹ã‚‰`git clone`ã§ãã‚‹ã‚ˆã€‚

```sh
$ git clone https://github.com/shita1112/cat-hotwire-demo
$ cd cat-hotwire-demo
$ git checkout tutorial-1
```

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã§ä½œã‚‹æ©Ÿèƒ½ã¯ä»¥ä¸‹ã®é€šã‚Šã ã‚ˆã€‚

- CRUDï¼ˆä¸€è¦§ãƒ»ç·¨é›†ãƒ»ç™»éŒ²ãƒ»å‰Šé™¤ï¼‰
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- æ¤œç´¢
- ã‚½ãƒ¼ãƒˆ
- ç·¨é›†ãƒ»ç™»éŒ²æ™‚ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

# rails new
ğŸ± ãã‚Œã˜ã‚ƒã‚ã•ã£ããé–‹ç™ºã—ã¦ã„ã“ã†ï¼

ğŸ± ã¾ãšã¯`$ rails new`ã§Railsã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ã‚ˆã€‚

```sh
$ rails new cat-hotwire --css=bootstrap --skip-jbuilder --skip-action-mailbox --skip-action-mailer --skip-test --skip-active-storage --skip-action-text
```

ğŸ± ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®æ„å‘³ã¯ä»¥ä¸‹ã®é€šã‚Šã ã‚ˆã€‚

- `--css=bootstrap`: CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«Bootstrapã‚’åˆ©ç”¨
- `--skip-jbuilder`: jbuilderã®å°å…¥ã‚’skip
- `--skip-action-mailbox`: action-mailboxã®å°å…¥ã‚’skip
- `--skip-action-mailer`: action-mailerã®å°å…¥ã‚’skip
- `--skip-test`: testã®å°å…¥ã‚’skip
- `--skip-active-storage`: active-storageã®å°å…¥ã‚’skip
- `--skip-action-text`: action-textã®å°å…¥ã‚’skip

ğŸ± CSSãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«Bootstrapã‚’ä½¿ã†ã®ã§ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«`--css bootstrap`ã‚’æŒ‡å®šã—ã¦ã­ã€‚ã“ã‚Œã¯Rails7ã§è¿½åŠ ã•ã‚ŒãŸã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã€ã“ã‚Œã‚’ä½¿ã†ã¨Bootstrapã¨Bootstrap Iconsã®è¨­å®šã‚’ã„ã„æ„Ÿã˜ã«ã‚„ã£ã¦ãã‚Œã‚‹ã‚ˆã€‚

ğŸ± ã‚ã¨`jbuilder`ç­‰ã®ä¸è¦ãªæ©Ÿèƒ½ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã‚‹ã‚ˆã€‚

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/79f42af2d453b6eae72d272e3f4814e5b84a36cd
# æ—¥æœ¬å‘ã‘ã«è¨­å®šã‚’å¤‰æ›´
ğŸ± æ—¥æœ¬èªã¨æ—¥æœ¬æ™‚é–“ã‚’ä½¿ã†ã‚ˆã†ã«è¨­å®šã‚’ä¿®æ­£ã™ã‚‹ã‚ˆã€‚

```diff rb:config/application.rb
+   # ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’Tokyoï¼ˆæ—¥æœ¬ï¼‰ã«ã™ã‚‹
+   config.time_zone = "Tokyo"
+   # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚’æ—¥æœ¬ã«ã™ã‚‹
+   config.i18n.default_locale = :ja
```

ğŸ± æ—¥æœ¬èªã®ãƒ­ã‚±ãƒ¼ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`ja.yml`ã«é…ç½®ã™ã‚‹ã‚ˆã€‚[rails-i18nã®ã“ã¡ã‚‰ã®ç¿»è¨³](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/ja.yml)ã‚’åˆ©ç”¨ã•ã›ã¦ã„ãŸã ãã‚ˆã€‚

:::details ja.ymlï¼ˆé•·ã„ã®ã§æŠ˜ã‚ŠãŸãŸã¿ï¼‰
```yaml:config/locales/ja.yml
---
ja:
  activerecord:
    errors:
      messages:
        record_invalid: 'ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: %{errors}'
        restrict_dependent_destroy:
          has_one: "%{record}ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã®ã§å‰Šé™¤ã§ãã¾ã›ã‚“"
          has_many: "%{record}ãŒå­˜åœ¨ã—ã¦ã„ã‚‹ã®ã§å‰Šé™¤ã§ãã¾ã›ã‚“"
  date:
    abbr_day_names:
    - æ—¥
    - æœˆ
    - ç«
    - æ°´
    - æœ¨
    - é‡‘
    - åœŸ
    abbr_month_names:
    - 
    - 1æœˆ
    - 2æœˆ
    - 3æœˆ
    - 4æœˆ
    - 5æœˆ
    - 6æœˆ
    - 7æœˆ
    - 8æœˆ
    - 9æœˆ
    - 10æœˆ
    - 11æœˆ
    - 12æœˆ
    day_names:
    - æ—¥æ›œæ—¥
    - æœˆæ›œæ—¥
    - ç«æ›œæ—¥
    - æ°´æ›œæ—¥
    - æœ¨æ›œæ—¥
    - é‡‘æ›œæ—¥
    - åœŸæ›œæ—¥
    formats:
      default: "%Y/%m/%d"
      long: "%Yå¹´%mæœˆ%dæ—¥(%a)"
      short: "%m/%d"
    month_names:
    - 
    - 1æœˆ
    - 2æœˆ
    - 3æœˆ
    - 4æœˆ
    - 5æœˆ
    - 6æœˆ
    - 7æœˆ
    - 8æœˆ
    - 9æœˆ
    - 10æœˆ
    - 11æœˆ
    - 12æœˆ
    order:
    - :year
    - :month
    - :day
  datetime:
    distance_in_words:
      about_x_hours:
        one: ç´„1æ™‚é–“
        other: ç´„%{count}æ™‚é–“
      about_x_months:
        one: ç´„1ãƒ¶æœˆ
        other: ç´„%{count}ãƒ¶æœˆ
      about_x_years:
        one: ç´„1å¹´
        other: ç´„%{count}å¹´
      almost_x_years:
        one: 1å¹´å¼±
        other: "%{count}å¹´å¼±"
      half_a_minute: 30ç§’å‰å¾Œ
      less_than_x_seconds:
        one: 1ç§’ä»¥å†…
        other: "%{count}ç§’æœªæº€"
      less_than_x_minutes:
        one: 1åˆ†ä»¥å†…
        other: "%{count}åˆ†æœªæº€"
      over_x_years:
        one: 1å¹´ä»¥ä¸Š
        other: "%{count}å¹´ä»¥ä¸Š"
      x_seconds:
        one: 1ç§’
        other: "%{count}ç§’"
      x_minutes:
        one: 1åˆ†
        other: "%{count}åˆ†"
      x_days:
        one: 1æ—¥
        other: "%{count}æ—¥"
      x_months:
        one: 1ãƒ¶æœˆ
        other: "%{count}ãƒ¶æœˆ"
      x_years:
        one: 1å¹´
        other: "%{count}å¹´"
    prompts:
      second: ç§’
      minute: åˆ†
      hour: æ™‚
      day: æ—¥
      month: æœˆ
      year: å¹´
  errors:
    format: "%{attribute}%{message}"
    messages:
      accepted: ã‚’å—è«¾ã—ã¦ãã ã•ã„
      blank: ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
      confirmation: ã¨%{attribute}ã®å…¥åŠ›ãŒä¸€è‡´ã—ã¾ã›ã‚“
      empty: ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
      equal_to: ã¯%{count}ã«ã—ã¦ãã ã•ã„
      even: ã¯å¶æ•°ã«ã—ã¦ãã ã•ã„
      exclusion: ã¯äºˆç´„ã•ã‚Œã¦ã„ã¾ã™
      greater_than: ã¯%{count}ã‚ˆã‚Šå¤§ãã„å€¤ã«ã—ã¦ãã ã•ã„
      greater_than_or_equal_to: ã¯%{count}ä»¥ä¸Šã®å€¤ã«ã—ã¦ãã ã•ã„
      inclusion: ã¯ä¸€è¦§ã«ã‚ã‚Šã¾ã›ã‚“
      invalid: ã¯ä¸æ­£ãªå€¤ã§ã™
      less_than: ã¯%{count}ã‚ˆã‚Šå°ã•ã„å€¤ã«ã—ã¦ãã ã•ã„
      less_than_or_equal_to: ã¯%{count}ä»¥ä¸‹ã®å€¤ã«ã—ã¦ãã ã•ã„
      model_invalid: 'ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ: %{errors}'
      not_a_number: ã¯æ•°å€¤ã§å…¥åŠ›ã—ã¦ãã ã•ã„
      not_an_integer: ã¯æ•´æ•°ã§å…¥åŠ›ã—ã¦ãã ã•ã„
      odd: ã¯å¥‡æ•°ã«ã—ã¦ãã ã•ã„
      other_than: ã¯%{count}ä»¥å¤–ã®å€¤ã«ã—ã¦ãã ã•ã„
      present: ã¯å…¥åŠ›ã—ãªã„ã§ãã ã•ã„
      required: ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
      taken: ã¯ã™ã§ã«å­˜åœ¨ã—ã¾ã™
      too_long: ã¯%{count}æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„
      too_short: ã¯%{count}æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„
      wrong_length: ã¯%{count}æ–‡å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„
    template:
      body: æ¬¡ã®é …ç›®ã‚’ç¢ºèªã—ã¦ãã ã•ã„
      header:
        one: "%{model}ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"
        other: "%{model}ã«%{count}å€‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"
  helpers:
    select:
      prompt: é¸æŠã—ã¦ãã ã•ã„
    submit:
      create: ç™»éŒ²ã™ã‚‹
      submit: ä¿å­˜ã™ã‚‹
      update: æ›´æ–°ã™ã‚‹
  number:
    currency:
      format:
        delimiter: ","
        format: "%n%u"
        precision: 0
        separator: "."
        significant: false
        strip_insignificant_zeros: false
        unit: å††
    format:
      delimiter: ","
      precision: 3
      separator: "."
      significant: false
      strip_insignificant_zeros: false
    human:
      decimal_units:
        format: "%n %u"
        units:
          billion: åå„„
          million: ç™¾ä¸‡
          quadrillion: åƒå…†
          thousand: åƒ
          trillion: å…†
          unit: ''
      format:
        delimiter: ''
        precision: 3
        significant: true
        strip_insignificant_zeros: true
      storage_units:
        format: "%n%u"
        units:
          byte: ãƒã‚¤ãƒˆ
          eb: EB
          gb: GB
          kb: KB
          mb: MB
          pb: PB
          tb: TB
    percentage:
      format:
        delimiter: ''
        format: "%n%"
    precision:
      format:
        delimiter: ''
  support:
    array:
      last_word_connector: "ã€"
      two_words_connector: "ã€"
      words_connector: "ã€"
  time:
    am: åˆå‰
    formats:
      default: "%Yå¹´%mæœˆ%dæ—¥(%a) %Hæ™‚%Måˆ†%Sç§’ %z"
      long: "%Y/%m/%d %H:%M"
      short: "%m/%d %H:%M"
    pm: åˆå¾Œ
```
:::

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/057b9d9b9c97ddc98601b0bc15b64a8a76a01bd9
# Turbo Driveã‚’ç„¡åŠ¹åŒ–
ğŸ± Rails7ã§ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§Turbo DriveãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã€‚ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã§ã¯Hotwireã‚’ä½¿ã‚ãšã«ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã—ãŸã„ã®ã§ã€ç„¡åŠ¹ã«ã—ã¦ãŠãã‚ˆï¼ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«2ã§æœ‰åŠ¹ã«ã™ã‚‹ã‚ˆï¼‰ã€‚

```rb
Turbo.session.drive = false
```

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/e00da2fa82fe6c814ebe7321c9857d3a8362b610
# å‹•ç‰©5ç¨®ã®Scaffoldã‚’è¿½åŠ 
ğŸ± Catï¼ˆã­ã“ï¼‰ã®Scaffoldã‚’ä½œæˆã™ã‚‹ã‚ˆã€‚

```sh
# DBã‚’ä½œæˆ
$ rails db:create

# ã­ã“ã®Scaffoldã‚’ä½œæˆ
$ rails g scaffold Cat name:string age:integer

# Catãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
$ rails db:migrate
```

ğŸ± ã“ã‚Œã§Catã®CRUDãŒã§ããŸã‚ˆã€‚ã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦ http://localhost:3000/cats ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ç¢ºèªã—ã¦ã¿ã¦ã­ã€‚

```sh
$ bin/dev
```

ğŸ± ï¼ˆ`$ rails server`ã§ã¯ãªã`$ bin/dev`ãªç†ç”±ã«ã¤ã„ã¦ã¯æ¬¡ç¯€ã§èª¬æ˜ã™ã‚‹ã‚ˆã€‚ï¼‰

ğŸ± Catã®æ—¥æœ¬èªè¨³ã‚’è¿½åŠ ã—ã¦ãŠãã‚ˆã€‚

```yaml:config/locales/activerecord.ja.yml
ja:
  activerecord:
    models:
      cat: ã­ã“
    attributes:
      cat:
        name: åå‰
        age: å¹´é½¢
```

ğŸ± å®Ÿéš›ã«ä½œã‚Šè¾¼ã‚“ã§ã„ãã®ã¯Catã®ç”»é¢ã ã‘ã ã‘ã©ã€ç®¡ç†ç”»é¢ã«ãƒ†ãƒ¼ãƒ–ãƒ«ãŒ1ã¤ã ã¨å¯‚ã—ã„ã®ã§ã€ä»–ã«ã‚‚ã„ãã¤ã‹Scaffoldã‚’ä½œã£ã¦ãŠãã‚ˆã€‚

```sh
# ä¸Šã‹ã‚‰ã„ã¬ã€ã²ã‚ˆã“ã€ãƒãƒªãƒã‚ºãƒŸã€ãƒ•ã‚¯ãƒ­ã‚¦
$ rails g scaffold Dog name:string age:integer
$ rails g scaffold Chick name:string age:integer
$ rails g scaffold Hedgehog name:string age:integer
$ rails g scaffold Owl name:string age:integer

# ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
$ rails db:migrate
```

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/383f1e868913fba0b6c72202aa9fcd4e1c2d4a15
https://github.com/shita1112/cat-hotwire-demo/commit/55ace79bca4dfb093f77e8572ffb7678ba50e595
# importmap-railsã¨jsbundling-rails
ğŸ± ä»Šå›ã€ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã«`$ rails server`ã§ã¯ãªã`$ bin/dev`ã‚’ä½¿ã£ãŸã‚ˆã€‚ãã®ç†ç”±ã«ã¤ã„ã¦èª¬æ˜ã™ã‚‹ã­ã€‚

ğŸ± Rails6ã§ã¯npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆJavaScriptã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ã®ç®¡ç†ã«ã¯webpackerã¨ã„ã†gemã‚’åˆ©ç”¨ã—ã¦ã„ãŸã‚ˆã€‚ã“ã‚ŒãŒRails7ã§ã¯å»ƒæ­¢ã«ãªã£ã¦ã€ä»£ã‚ã‚Šã«2ã¤ã®æ–¹æ³•ãŒæä¾›ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆã€‚

ğŸ± 1ã¤ç›®ã¯importmap-railsã¨ã„ã†gemã‚’ä½¿ã†æ–¹æ³•ã§ã€ã“ã‚ŒãŒRailsã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚„ã‚Šæ–¹ã ã‚ˆã€‚ã“ã‚Œã¯webpackã‚„esbuildç­‰ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’åˆ©ç”¨ã—ãªã„æ–¹æ³•ã ã‚ˆã€‚è‡ªå‰ã®JavaScriptã¯ES6ã§æ›¸ã„ã¦ãƒãƒ³ãƒ‰ãƒ«ã›ãšã«HTTP/2ã§é…ä¿¡ã—ã¦ã€ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã®JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯CDNã‹ã‚‰å–å¾—ã™ã‚‹æ–¹æ³•ã«ãªã‚‹ã€‚ä»Šå›ã¯ä½¿ã‚ãªã„ã®ã§ã€è©³ã—ãçŸ¥ã‚ŠãŸã„å ´åˆã¯ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã—ã¦ã­ã€‚

å‚è€ƒ
https://zenn.dev/takeyuweb/articles/996adfac0d58fb
https://world.hey.com/dhh/modern-web-apps-without-javascript-bundling-or-transpiling-a20f2755
https://github.com/rails/importmap-rails

ğŸ± 2ã¤ç›®ãŒjsbundling-railsï¼ˆã¨cssbundling-railsï¼‰ã‚’ä½¿ã†æ–¹æ³•ã§ã€ä»Šå›ã¯ã“ã¡ã‚‰ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚ˆã€‚`$ rails new`ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§`--css bootstrap`ã‚’æŒ‡å®šã—ãŸã‘ã‚Œã©ã‚‚ã€ãã®å ´åˆã¯è‡ªå‹•çš„ã«jsbundling-railsã‚’ä½¿ã†ã“ã¨ã«ãªã‚‹ã‚ˆã€‚

ğŸ± jsbundling-railsã¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½¿ã†ã‚ˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯webpackã§ã¯ãªãã€ãƒ“ãƒ«ãƒ‰ãŒé«˜é€Ÿãªesbuildã‚’ä½¿ã†ï¼‰ã€‚ãŸã ã—`$ rails server`ã‚’èµ·å‹•ã™ã‚‹ã ã‘ã§ã¯è‡ªå‹•ã§JavaScriptãƒ»CSSã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œãªã„ã‚“ã ã€‚JavaScriptãƒ»CSSã®ãƒ“ãƒ«ãƒ‰ã‚’ã™ã‚‹ãŸã‚ã«ã¯foremanã¨ã„ã†ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã€ã‚µãƒ¼ãƒãƒ¼ã®ãƒ—ãƒ­ã‚»ã‚¹ã¨ã€JavaScriptãƒ»CSSã®è‡ªå‹•ãƒ“ãƒ«ãƒ‰ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åŒæ™‚ã«ç«‹ã¡ä¸Šã’ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã€‚`--css bootstrap`ã‚’æŒ‡å®šã—ãŸå ´åˆã€â†“ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒç”¨æ„ã•ã‚Œã¦ã„ã„æ„Ÿã˜ã«ã‚„ã£ã¦ãã‚Œã‚‹ã®ã§ã€é–‹ç™ºã™ã‚‹å´ã¯`$ bin/dev`ã‚’å©ãã ã‘ã§OKã ã‚ˆã€‚


:::details `$ bin/dev`ã®è©³ç´°
```sh:bin/dev
#!/usr/bin/env bash

# foremanãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
if ! command -v foreman &> /dev/null
then
  echo "Installing foreman..."
  gem install foreman
fi

# Procfile.devã‚’å…ƒã«foremanã‚’èµ·å‹•
foreman start -f Procfile.dev "$@"
```

```:Procfile.dev
# foremanãŒç«‹ã¡ä¸Šã’ã‚‹ãƒ—ãƒ­ã‚»ã‚¹

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•
web: bin/rails server -p 3000
# ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚’ç›£è¦–ã—ã¦ã€esbuildã§JavaScriptã‚’è‡ªå‹•ãƒ“ãƒ«ãƒ‰ï¼ˆpackage.jsonã®buildã«å¯¾å¿œï¼‰
js: yarn build --watch
# ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ã‚’ç›£è¦–ã—ã¦ã€sassã§application.bootstrap.scssã‚’è‡ªå‹•ãƒ“ãƒ«ãƒ‰ï¼ˆpackage.jsonã®build:cssã«å¯¾å¿œï¼‰
css: yarn build:css --watch
```

```json:package.json
  "scripts": {
    // yarn buildã«å¯¾å¿œ
    "build": "esbuild app/javascript/*.* --bundle --sourcemap --outdir=app/assets/builds",
    // yarn build:cssã«å¯¾å¿œ
    "build:css": "sass ./app/assets/stylesheets/application.bootstrap.scss ./app/assets/builds/application.css --no-source-map --load-path=node_modules"
  }
```
:::

ğŸ± JSã®ãƒ“ãƒ«ãƒ‰ã«é–¢ã—ã¦ã¯jsbundling-railsãŒã€CSSã®ãƒ“ãƒ«ãƒ‰ã«é–¢ã—ã¦ã¯cssbundling-railsãŒæ‹…å½“ã™ã‚‹ã‚ˆã€‚

ğŸ± ã¨ã„ã†ã“ã¨ã§ã€ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã«ã¯`$ bin/dev`ã‚’ä½¿ã£ã¦ã„ãã‚ˆã€‚

å‚è€ƒ
https://techracho.bpsinc.jp/hachi8833/2022_03_17/115294
https://github.com/rails/jsbundling-rails
# seedsã®ä½œæˆ
ğŸ± ã­ã“ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’100ä»¶ä½œã‚‹ã‚ˆã€‚

ğŸ± ã¾ãšã¯seedsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹ã‚ˆã€‚

:::details seeds.rbï¼ˆé•·ã„ã®ã§æŠ˜ã‚ŠãŸãŸã¿ï¼‰

```rb:db/seeds.rb
# å‚è€ƒ: https://nekorich.com/cat-names
Cat.create(
  [
    {name: "ã‚¢ãƒ¼ãƒãƒ¼", age: 0 },
    {name: "ã‚¢ãƒ¼ãƒ­", age: 1 },
    {name: "ã‚¢ã‚¤ãƒ´ã‚¡ãƒ³", age: 2 },
    {name: "ã‚¢ã‚¤ãƒªã‚¹", age: 3 },
    {name: "ã‚¢ãƒ´ã‚¡ãƒ­ãƒ³", age: 4 },
    {name: "ã‚¢ã‚¯ã‚»ãƒ«", age: 5 },
    {name: "ã‚ãšã", age: 6 },
    {name: "ã‚¢ãƒ‡ã‚£", age: 7 },
    {name: "ã‚¢ãƒ‡ã‚£ã‚½ãƒ³", age: 8 },
    {name: "ã‚¢ãƒ‹ãƒ¼", age: 9 },
    {name: "ã‚¢ãƒ“ãƒ¼", age: 10 },
    {name: "ã‚¢ãƒãƒ­", age: 11 },
    {name: "ã‚¢ãƒªã‚¨ãƒ«", age: 12 },
    {name: "ã‚¢ãƒªã‚¹", age: 13 },
    {name: "ã‚¢ãƒ«ãƒ‰", age: 14 },
    {name: "ã‚¢ãƒ«ãƒ•ã‚£", age: 15 },
    {name: "ã‚¢ãƒ¬ãƒƒã‚¯ã‚¹", age: 16 },
    {name: "ã‚¢ãƒ³ãƒãƒ¼", age: 17 },
    {name: "ã‚¤ã‚¶ãƒ™ãƒ©", age: 18 },
    {name: "ã‚¤ã‚¸ã‚£", age: 19 },
    {name: "ã‚¦ã‚£ã‚¹ã‚«ãƒ¼", age: 0 },
    {name: "ã‚¦ã‚£ãƒªã‚¢ãƒ ", age: 1 },
    {name: "ã‚¦ã‚£ãƒ­ãƒ¼", age: 2 },
    {name: "ã†ã«", age: 3 },
    {name: "ã‚¨ã‚¤ãƒ´ã‚¡", age: 4 },
    {name: "ã‚¨ãƒ´ã‚¡", age: 5 },
    {name: "ã‚¨ã‚³ãƒ¼", age: 6 },
    {name: "ã‚¨ãƒ‡ã‚£", age: 7 },
    {name: "ã‚¨ãƒ", age: 8 },
    {name: "ã‚¨ãƒ©", age: 9 },
    {name: "ã‚¨ãƒªãƒ¼", age: 10 },
    {name: "ã‚¨ãƒ«ã‚µ", age: 11 },
    {name: "ã‚¨ãƒ«ãƒ“ã‚¹", age: 12 },
    {name: "ã‚¨ãƒ³ã‚¸ã‚§ãƒ«", age: 13 },
    {name: "ã‚ªãƒ¼ã‚¿ãƒ ", age: 14 },
    {name: "ã‚ªãƒ¼ãƒ†ã‚£ã‚¹", age: 15 },
    {name: "ã‚ªãƒ¼ãƒ‡ã‚£ãƒ³", age: 16 },
    {name: "ã‚ªãƒ¼ãƒ‰ãƒªãƒ¼", age: 17 },
    {name: "ãŠãã‚‰", age: 18 },
    {name: "ã‚ªã‚¸ãƒ¼", age: 19 },
    {name: "ã‚ªã‚¹ã‚«ãƒ¼", age: 0 },
    {name: "ãŠã‚‚ã¡", age: 1 },
    {name: "ã‚ªãƒªã‚£", age: 2 },
    {name: "ã‚ªãƒªã‚ªãƒ³", age: 3 },
    {name: "ã‚ªãƒªãƒãƒ¼", age: 4 },
    {name: "ã‚ªãƒªãƒ“ã‚¢", age: 5 },
    {name: "ã‚ªãƒ¬ã‚ª", age: 6 },
    {name: "ã‚¬ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰", age: 7 },
    {name: "ã‹ã„", age: 8 },
    {name: "ã‚«ã‚¨ã‚µãƒ«", age: 9 },
    {name: "ã‚¬ãƒŠãƒ¼", age: 10 },
    {name: "ã‚«ãƒªãƒ¼", age: 11 },
    {name: "ã‚­ã‚­", age: 12 },
    {name: "ã‚®ã‚ºãƒ¢", age: 13 },
    {name: "ã‚­ãƒ†ã‚£", age: 14 },
    {name: "ããªã“", age: 15 },
    {name: "ã‚­ãƒ£ã‚¹ãƒ‘ãƒ¼", age: 16 },
    {name: "ã‚­ãƒ£ãƒ³ãƒ‡ã‚£", age: 17 },
    {name: "ãã‚“ã˜", age: 18 },
    {name: "ã‚¯ã‚¤ãƒŠ", age: 19 },
    {name: "ãã†", age: 0 },
    {name: "ã‚°ãƒ¼ã‚¹", age: 1 },
    {name: "ã‚¯ãƒ¼ãƒ‘ãƒ¼", age: 2 },
    {name: "ã‚¯ãƒƒã‚­ãƒ¼", age: 3 },
    {name: "ã‚¯ãƒ©ãƒƒã‚·ãƒ¥", age: 4 },
    {name: "ã‚°ãƒªãƒ•ã‚£ãƒ³", age: 5 },
    {name: "ã‚°ãƒ¬ã‚¤ã‚·ãƒ¼", age: 6 },
    {name: "ã‚°ãƒ¬ãƒ¼ã‚¹", age: 7 },
    {name: "ã‚¯ãƒ¬ã‚ª", age: 8 },
    {name: "ãã‚", age: 9 },
    {name: "ã‚¯ãƒ­ã‚¨", age: 10 },
    {name: "ã‚±ã‚¤ã‚·ãƒ¼", age: 11 },
    {name: "ã‚±ã‚¤ãƒ†ã‚£", age: 12 },
    {name: "ã‚±ãƒ†ã‚£", age: 13 },
    {name: "ã“ã“", age: 14 },
    {name: "ã‚³ã‚¹ãƒ¢", age: 15 },
    {name: "ã“ãŸã‚ã†", age: 16 },
    {name: "ã“ã¦ã¤", age: 17 },
    {name: "ã‚³ãƒŠ", age: 18 },
    {name: "ã‚´ãƒ³ã‚¾", age: 19 },
    {name: "ã‚µãƒ¼ã‚·ãƒ£", age: 0 },
    {name: "ã•ãã‚‰", age: 1 },
    {name: "ã‚µã‚·ãƒ¼", age: 2 },
    {name: "ã‚µãƒ‡ã‚£", age: 3 },
    {name: "ã‚µãƒŸãƒ¼", age: 4 },
    {name: "ã‚µãƒ ", age: 5 },
    {name: "ã‚µãƒ¬ãƒ ", age: 6 },
    {name: "ã‚·ãƒ¼ãƒ€", age: 7 },
    {name: "ã‚¸ã‚§ã‚¤ã‚¯", age: 8 },
    {name: "ã‚·ã‚§ãƒ“ãƒ¼", age: 9 },
    {name: "ã‚¸ã‚®ãƒ¼", age: 10 },
    {name: "ã˜ã˜", age: 11 },
    {name: "ã—ã—ã¾ã‚‹", age: 12 },
    {name: "ã‚·ãƒŠãƒ¢ãƒ³", age: 13 },
    {name: "ã‚·ãƒ", age: 14 },
    {name: "ã‚¸ãƒ—ã‚·ãƒ¼", age: 15 },
    {name: "ã‚¸ãƒ£ã‚¹ãƒ†ã‚£ã‚¹", age: 16 },
    {name: "ã‚¸ãƒ£ã‚¹ãƒ‘ãƒ¼", age: 17 },
    {name: "ã‚¸ãƒ£ã‚¹ãƒŸãƒ³", age: 18 },
    {name: "ã‚¸ãƒ£ãƒƒã‚¯", age: 19 },
  ]
)
```
:::

ğŸ± ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚’DBã«æŠ•å…¥ã™ã‚‹ã‚ˆã€‚

```sh
$ rails db:seed
```

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/bf4130bb986d2ed850b7f5a3b57bee43027da935
# ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…
![](/images/Apr-10-2022-16-29-37.gif)

ğŸ± æ¬¡ã«ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã‚ˆã€‚

ğŸ± ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…ã«ã¯kaminariã¨ã„ã†gemã‚’ä½¿ã†ã‚ˆã€‚

:::message
ğŸ± kaminariã®è©³ç´°ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„å ´åˆã¯ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ã­ï¼ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å¿…è¦ã«ãªã‚‹çŸ¥è­˜ã«ã¤ã„ã¦ã¯é©å®œè§£èª¬ã—ã¦ã„ãã®ã§ã€ä½¿ã„æ–¹ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚å•é¡Œãªã„ã‚ˆï¼‰ã€‚

https://nekorails.hatenablog.com/entry/2018/10/15/005146

:::

ğŸ± Gemfileã«kaminariã‚’è¿½åŠ ã—ã¦ã€bundle installã™ã‚‹ã‚ˆã€‚

```rb:Gemfile
gem "kaminari"
```

```sh
$ bundle install
```

ğŸ± ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã™ã‚‹ã‚ˆã€‚

```rb:app/controllers/cats_controller.rb
  def index
-   @cats = Cat.all
+   # @catsã«å¯¾ã—ã¦ãƒšãƒ¼ã‚¸ãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
+   @cats = Cat.page(params[:page])
  end
```

```erb:app/views/cats/index.html.erb
    <% end %>
  </div>

+ <%# ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ %>
+ <%= paginate @cats %>
+
  <%= link_to "New cat", new_cat_path %>
```

ğŸ± ã“ã‚Œã§ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆã€‚

ğŸ± ãŸã ã€ã“ã‚Œã ã¨ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨è¨˜ãŒè‹±èªãªã®ã§æ—¥æœ¬èªåŒ–ã—ã¦ãŠãã‚ˆã€‚

```yaml:config/locales/kaminari.ja.yml
# å‚è€ƒ: https://github.com/tigrish/kaminari-i18n/blob/master/config/locales/ja.yml
ja:
  helpers:
    page_entries_info:
      more_pages:
        display_entries: "<b>%{total}</b>ä¸­ã®%{entry_name}ã‚’è¡¨ç¤ºã—ã¦ã„ã¾ã™ <b>%{first} - %{last}</b>"
      one_page:
        display_entries:
          one: "<b>%{count}</b>ãƒ¬ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºä¸­ã§ã™ %{entry_name}"
          other: "<b>%{count}</b>ãƒ¬ã‚³ãƒ¼ãƒ‰è¡¨ç¤ºä¸­ã§ã™ %{entry_name}"
          zero: "ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ %{entry_name}"
  views:
    pagination:
      first: "&laquo; æœ€åˆ"
      last: "æœ€å¾Œ &raquo;"
      next: "æ¬¡ &rsaquo;"
      previous: "&lsaquo; å‰"
      truncate: "&hellip;"
```

ğŸ± ã‚ã¨kaminariã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨1ãƒšãƒ¼ã‚¸ã«ã¤ããƒ¬ã‚³ãƒ¼ãƒ‰ã‚’25ä»¶ã‚’è¡¨ç¤ºã™ã‚‹ã®ã ã‘ã©ã€ã“ã®ã‚¢ãƒ—ãƒªã§ã¯1ãƒšãƒ¼ã‚¸ã«ã¤ã10ä»¶ã®è¡¨ç¤ºã«ã—ãŸã„ã®ã§ã€ãã®è¨­å®šã‚’ã—ã¦ãŠãã‚ˆã€‚

```sh
# kaminariã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹
$ rails g kaminari:config
      create  config/initializers/kaminari_config.rb
```

```rb:config/initializers/kaminari_config.rb
# frozen_string_literal: true
Kaminari.configure do |config|
  # 1ãƒšãƒ¼ã‚¸10ä»¶ã«å¤‰æ›´ã™ã‚‹
  config.default_per_page = 10
  # config.max_per_page = nil
  # config.window = 4
  # config.outer_window = 0
  # config.left = 0
  # config.right = 0
  # config.page_method_name = :page
  # config.param_name = :page
  # config.params_on_first_page = false
end
```

ğŸ± ã“ã‚Œã§ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¯å®Œæˆã ã‚ˆã€‚

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/f1f704c6196a43dbbae070b2ee45bcd9a0bccf05
# æ¤œç´¢ã®å®Ÿè£…
![](/images/Apr-10-2022-16-29-31.gif)

ğŸ± æ¬¡ã«æ¤œç´¢æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã‚ˆã€‚

ğŸ± æ¤œç´¢ã®å®Ÿè£…ã«ã¯ransackã¨ã„ã†gemã‚’ä½¿ã†ã‚ˆã€‚

:::message
ğŸ± ransackã®è©³ç´°ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„å ´åˆã¯ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ã­ï¼ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å¿…è¦ã«ãªã‚‹çŸ¥è­˜ã«ã¤ã„ã¦ã¯é©å®œè§£èª¬ã—ã¦ã„ãã®ã§ã€ä½¿ã„æ–¹ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚å•é¡Œãªã„ã‚ˆï¼‰ã€‚

https://nekorails.hatenablog.com/entry/2017/05/31/173925

:::

ğŸ± ã¾ãšransackã‚’installã™ã‚‹ã‚ˆã€‚

```rb:Gemfile
gem "ransack"
```

```sh
$ bundle install
```

ğŸ± ã‚³ãƒ¼ãƒ‰ã¯ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã‚ˆã€‚

```diff rb:app/controllers/cats_controller.rb
  def index
-   @cats = Cat.page(params[:page])

+   # `Cat.ransack`ã§Catã«å¯¾ã—ã¦ransackã‚’ä½¿ã†
+   # params[:q]ã«ã¯æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã§æŒ‡å®šã—ãŸæ¤œç´¢æ¡ä»¶ãŒå…¥ã‚‹
+   @search = Cat.ransack(params[:q])
+
+   # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚½ãƒ¼ãƒˆã‚’idé™é †ã«ã™ã‚‹
+   @search.sorts = 'id desc' if @search.sorts.empty?
+
+   # `@search.result`ã§æ¤œç´¢çµæœã¨ãªã‚‹@catsã‚’å–å¾—ã™ã‚‹
+   # æ¤œç´¢çµæœã«å¯¾ã—ã¦ã¯kaminariã®pageãƒ¡ã‚½ãƒƒãƒ‰ã‚’ãƒã‚§ãƒ¼ãƒ³ã§ãã‚‹
+   @cats = @search.result.page(params[:page])
  end
```

```diff erb:app/views/cats/index.html.erb
 <h1>Cats</h1>

+ <%# ransackã‚’åˆ©ç”¨ã—ãŸæ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã§ã¯ã€form_withã®ä»£ã‚ã‚Šã«search_form_forã‚’ä½¿ã† %>
+ <%= search_form_for @search do |f| %>
+ 
+   <%# `ã‚«ãƒ©ãƒ å_cont`ã¨ã™ã‚‹ã“ã¨ã§ã€ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦LIKEã‚’ä½¿ã£ãŸæ›–æ˜§ä¸€è‡´æ¤œç´¢ãŒã§ãã‚‹ %>
+   <%= f.label :name_cont, "åå‰" %>
+   <%= f.search_field :name_cont %>
+ 
+   <%# `ã‚«ãƒ©ãƒ å_eq`ã¨ã™ã‚‹ã“ã¨ã§ã€ã‚«ãƒ©ãƒ ã«å¯¾ã—ã¦å®Œå…¨ä¸€è‡´æ¤œç´¢ãŒã§ãã‚‹ %>
+   <%= f.label :age_eq, "å¹´é½¢" %>
+   <%= f.search_field :age_eq %>
+   <%= f.submit %>
+ 
+   <%# æ¤œç´¢çµæœã¨æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢ã™ã‚‹ %>
+   <%= link_to "ã‚¯ãƒªã‚¢", cats_path %>
+ <% end %>

 <div id="cats">
   <% @cats.each do |cat| %>
     <%= render cat %>
```

ğŸ± ã“ã‚Œã§æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ ã¯å®Œæˆã ã‚ˆã€‚

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/a132ee9c15e429eaee27a60797404bdb4af9f148
# ã‚½ãƒ¼ãƒˆã®å®Ÿè£…
![](/images/Apr-10-2022-16-29-24.gif)

ğŸ± æ¬¡ã«ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã‚ˆã€‚

ğŸ± ã‚½ãƒ¼ãƒˆã®å®Ÿè£…ã‚‚ransackãŒã‚„ã£ã¦ãã‚Œã‚‹ã‚ˆã€‚

```diff erb:app/views/cats/index.html.erb
+ <%# ã‚½ãƒ¼ãƒˆã®ãƒªãƒ³ã‚¯ã€‚ã“ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨nameå±æ€§ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã‚‹ %>
+ <%= sort_link(@search, :name) %>
+ <%# ã‚½ãƒ¼ãƒˆã®ãƒªãƒ³ã‚¯ã€‚ã“ã®ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ageå±æ€§ã§ã‚½ãƒ¼ãƒˆã•ã‚Œã‚‹ %>
+ <%= sort_link(@search, :age) %>

 <div id="cats">
   <% @cats.each do |cat| %>
     <%= render cat %>
```

ğŸ± ã“ã‚Œã§ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ã¯å®Œæˆã ã‚ˆã€‚

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/6806e705f37ed030e59fe67cf8a33213b8a94370
# Bootstrap5ã§è¦‹ãŸç›®ã‚’æ•´ãˆã‚‹
![](/images/Apr-10-2022-16-29-17.gif)

ğŸ± ä¸€é€šã‚Šã®æ©Ÿèƒ½ã¯ã§ããŸã®ã§ã€Bootstrap5ã‚’ä½¿ã£ã¦è¦‹ãŸç›®ã‚’æ•´ãˆã‚‹ã‚ˆã€‚

ğŸ± å¤‰æ›´é‡ãŒå¤šã„ã®ã§ã€ã“ã¡ã‚‰ã®ã‚³ãƒŸãƒƒãƒˆã‚’å‚è€ƒã«ã—ã¦ã­ã€‚

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/94c959338e7d09b59d522c10158360066e1f82df

# ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè£…
ğŸ± æœ€å¾Œã«ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã‚ˆã€‚

![](/images/Apr-10-2022-16-29-11.gif)

ğŸ± å®Ÿè£…ã«ã¯bootstrap_formã¨ã„ã†gemã‚’ä½¿ã†ã‚ˆã€‚bootstrap_formã‚’ä½¿ã†ã¨ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¯¾å¿œã—ãŸBootstrapç”¨ã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç°¡å˜ã«å®Ÿè£…ã§ãã‚‹ã‚ˆã€‚

:::message
ğŸ± bootstrap_formã®è©³ç´°ã«ã¤ã„ã¦çŸ¥ã‚ŠãŸã„å ´åˆã¯ã“ã¡ã‚‰ã‚’å‚è€ƒã«ã—ã¦ã­ï¼ˆãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§å¿…è¦ã«ãªã‚‹çŸ¥è­˜ã«ã¤ã„ã¦ã¯é©å®œè§£èª¬ã—ã¦ã„ãã®ã§ã€ä½¿ã„æ–¹ã‚’çŸ¥ã‚‰ãªãã¦ã‚‚å•é¡Œãªã„ã‚ˆï¼‰ã€‚

https://github.com/bootstrap-ruby/bootstrap_form

:::

ğŸ± ã¾ãšãƒ¢ãƒ‡ãƒ«ã«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã‚ˆã€‚

```rb:app/models/cat.rb
class Cat < ApplicationRecord
  # åå‰: å¿…é ˆ
  validates :name, presence: true

  # å¹´é½¢: å¿…é ˆ + integer + 0ä»¥ä¸Š
  validates :age, presence: true, numericality: { only_integer: true, greater_than_or_equal_to: 0 }
end
```

ğŸ± bootstrap_formã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã€‚

```rb:Gemfile
gem "bootstrap_form"
```

```sh
$ bundle install
```

ğŸ± æ¬¡ã«bootstrap_formã‚’ä½¿ã£ã¦ãƒ•ã‚©ãƒ¼ãƒ ã‚’æ›¸ãã‚ˆã€‚

```diff erb:app/views/cats/_form.html.erb
-<%= form_with(model: cat) do |form| %>
- <% if cat.errors.any? %>
-   <div style="color: red">
-     <h2><%= pluralize(cat.errors.count, "error") %> prohibited this cat from being saved:</h2>
-
-     <ul>
-       <% cat.errors.each do |error| %>
-         <li><%= error.full_message %></li>
-       <% end %>
-     </ul>
-   </div>
- <% end %>
-
- <div>
-   <%= form.label :name, style: "display: block" %>
-   <%= form.text_field :name %>
- </div>
-
- <div>
-   <%= form.label :age, style: "display: block" %>
-   <%= form.number_field :age %>
- </div>
-
- <div>
-   <%= form.submit %>
- </div>
-<% end %>

+<%# bootstrap_formã‚’ä½¿ã£ãŸãƒ•ã‚©ãƒ¼ãƒ ã§ã¯ã€form_withã®ä»£ã‚ã‚Šã«bootstrap_form_withã‚’ä½¿ã† %>
+<%# ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ã®è¡¨ç¤ºã¯bootstrap_formãŒç”¨æ„ã—ã¦ãã‚Œã‚‹ã®ã§ã€è‡ªå‰ã§ç”¨æ„ã™ã‚‹å¿…è¦ãŒãªããªã‚‹ %>
+<%= bootstrap_form_with(model: cat) do |form| %>
+
+ <%# ãƒ©ãƒ™ãƒ«ã¯bootstrap_formãŒç”¨æ„ã—ã¦ãã‚Œã‚‹ã®ã§ã€è‡ªå‰ã§ç”¨æ„ã™ã‚‹å¿…è¦ãŒãªããªã‚‹ %>
+ <%# Bootstrapã®classå±æ€§ã‚‚bootstrap_formãŒè¨­å®šã—ã¦ãã‚Œã‚‹ã®ã§ã€è‡ªå‰ã§ç”¨æ„ã™ã‚‹å¿…è¦ã¯ãªã„ %>
+ <%= form.text_field :name %>
+ <%= form.number_field :age %>
+
+ <%# Bootstrapã®primaryè‰²ã®submitãƒœã‚¿ãƒ³ %>
+ <%= form.primary %>
+<% end %>
```

ğŸ± ã ã„ã¶ã‚³ãƒ¼ãƒ‰ãŒã™ã£ãã‚Šã—ãŸã­ã€‚

ğŸ± bootstrap_formã¯ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã§`presence: true`ã«è¨­å®šã—ãŸå±æ€§ã®ãƒ©ãƒ™ãƒ«ã«ã€è‡ªå‹•ã§`required`ã‚¯ãƒ©ã‚¹å±æ€§ã‚’ä»˜ä¸ã—ã¦ãã‚Œã‚‹ã€‚ãã‚Œã‚’åˆ©ç”¨ã—ã¦å¿…é ˆå±æ€§ã¯èµ¤`*`ã§ãƒãƒ¼ã‚¯ã•ã‚Œã‚‹ã‚ˆã†ã«CSSã‚’è¨­å®šã—ã¦ãŠãã‚ˆã€‚

```diff scss:app/assets/stylesheets/application.bootstrap.scss
  @import 'bootstrap/scss/bootstrap';
  @import 'bootstrap-icons/font/bootstrap-icons';

+ label.required:after {
+   content:" *";
+   color: red;
+ }
```

ã‚³ãƒŸãƒƒãƒˆ
https://github.com/shita1112/cat-hotwire-demo/commit/1f6fa9bf0e91f2e0f421176f6202e030c75b707e

# ã¾ã¨ã‚
ğŸ± ã“ã‚Œã§ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã¯çµ‚ã‚ã‚Šã ã‚ˆï¼å®Œæˆã—ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒã“ã¡ã‚‰ã€‚

![](/images/Apr-10-2022-16-25-58.gif)
*ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1*

ğŸ± ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«1ã®ãƒ‡ãƒ¢ã¯ã“ã¡ã‚‰ã‹ã‚‰è§¦ã‚Œã‚‹ã‚ˆã€‚
https://cat-hotwire-1.herokuapp.com/cats

ğŸ± ãŠç–²ã‚Œã•ã¾ã§ã—ãŸã€œã€‚

# Hotwireã®ãŠä»•äº‹ã‚’æ¢ã—ã¦ã„ã¾ã™ğŸ™‡â€â™‚ï¸
ç¾åœ¨ã€æ¥­å‹™å§”è¨—ã§å…¥ã‚Œã‚‹Hotwireã®ãŠä»•äº‹ã‚’æ¢ã—ã¦ã„ã¾ã™ã€‚

Hotwireã®çµŒé¨“ãŒã‚ã‚‹Railsã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ãŠæ¢ã—ã®æ–¹ã¯ã€ãœã² https://twitter.com/shita1112 ã«DMãã ã•ã„ğŸ™‡â€â™‚ï¸

ï¼ˆHotwireä¾¿åˆ©ã§æ¥½ã—ã„ã®ã§ã‚‚ã£ã¨ä½¿ã£ã¦ã„ããŸã„ã®ã§ã™ãŒã€ç¾çŠ¶ã ã¨Hotwireã®æ¡ˆä»¶ã¯ãªã‹ãªã‹è¦‹ã¤ã‹ã‚‰ãªã„æ„Ÿã˜ãªã®ã§ã—ãŸ......ã“ã®æœ¬ãŒå‚è€ƒã«ãªã£ãŸã¨æ„Ÿã˜ã¦ã€ã“ã‚Œã‹ã‚‰Hotwireã‚„ã£ã¦ã„ããã€œã¨ãªã£ãŸæ–¹ã¯ã€ãœã²ãœã²ãŠæ°—è»½ã«DMãã ã•ã„ã€œã€‚ã¨ã¦ã‚‚å–œã³ã¾ã™ï¼ï¼‰
